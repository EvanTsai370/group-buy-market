# ===================================================================
# 公共配置 (Common)
# ===================================================================
spring:
  profiles:
    # 【关键】在这里切换环境：dev | prod | test
    active: dev

  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8
    default-property-inclusion: non_null
  
  messages:
    basename: i18n/messages
    encoding: UTF-8

  # Redis 配置
  data:
    redis:
      host: localhost
      port: 6379
      database: 0
      password:  # 如果有密码就填写
      timeout: 3000ms
      lettuce:
        pool:
          max-active: 8    # 连接池最大连接数
          max-idle: 8      # 连接池最大空闲连接数
          min-idle: 0      # 连接池最小空闲连接数
          max-wait: -1ms   # 连接池最大阻塞等待时间

# MyBatis Plus 全局通用配置
mybatis-plus:
  mapper-locations: classpath:/mybatis/mapper/*.xml
  configuration:
    map-underscore-to-camel-case: true
  global-config:
    db-config:
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

# 应用自定义配置 (可以作为默认值)
app:
  thread-pool:
    core-size: 8
    max-size: 20
    queue-capacity: 200
    keep-alive-seconds: 60
    thread-name-prefix: "my-async-"

# 支付安全配置
payment:
  # 支付宝配置
  alipay:
    secret: ${ALIPAY_SECRET:your-alipay-secret-key-change-in-production}
  
  # 微信支付配置
  wechat:
    secret: ${WECHAT_SECRET:your-wechat-secret-key-change-in-production}
  
  # 银联支付配置
  unionpay:
    secret: ${UNIONPAY_SECRET:your-unionpay-secret-key-change-in-production}
  
  # IP 白名单（支付系统回调IP）
  # 生产环境请替换为真实的支付系统IP
  allowed-ips:
    - 127.0.0.1        # 本地测试
    - ::1              # 本地测试 IPv6
    # - 123.45.67.89   # 支付宝回调IP（示例，请替换为真实IP）
    # - 98.76.54.32    # 微信回调IP（示例，请替换为真实IP）

# 活动动态配置
activity:
  downgrade:
    switch: false  # 降级开关，默认关闭
  cut:
    range: 100     # 切量范围（0-100），100表示100%全量放行，10表示10%切量